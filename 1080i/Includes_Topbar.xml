<?xml version="1.0" encoding="UTF-8"?>
<includes>
    <!-- ====== -->
    <!-- Common -->
    <!-- ====== -->
    <include name="Topbar_HomeMenu_Item">
        <control type="label">
            <width>auto</width>
            <align>left</align>
            <height>70</height>
            <font>font_topbar_small</font>
            <textcolor>main_fg_100</textcolor>
            <animation effect="fade" start="100" end="33" condition="!String.IsEqual(Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label,Container($PARAM[id]).ListItemAbsolute.Label)">Conditional</animation>
            <label>$INFO[Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label]</label>
            <visible>!String.IsEqual(Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label,Container($PARAM[id]).ListItemAbsolute.Label)</visible>
            <visible>$PARAM[visible]</visible>
            <animation effect="fade" start="100" end="0" time="200">WindowClose</animation>
            <animation effect="fade" start="0" end="100" delay="300" time="300">WindowOpen</animation>
        </control>
        <control type="label">
            <width>auto</width>
            <align>left</align>
            <height>70</height>
            <font>font_topbar</font>
            <textcolor>main_fg_100</textcolor>
            <animation effect="fade" start="100" end="33" condition="!String.IsEqual(Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label,Container($PARAM[id]).ListItemAbsolute.Label)">Conditional</animation>
            <label>$INFO[Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label]</label>
            <visible>String.IsEqual(Container($PARAM[id]).ListItemAbsolute($PARAM[pos]).Label,Container($PARAM[id]).ListItemAbsolute.Label)</visible>
            <visible>$PARAM[visible]</visible>
            <animation effect="fade" start="100" end="0" time="200">WindowClose</animation>
            <animation effect="fade" start="0" end="100" delay="300" time="300">WindowOpen</animation>
        </control>
    </include>

    <include name="Topbar">
        <param name="info_hide" default="true" />
        <definition>
            <control type="group">
                <top>30</top>
                <include condition="$PARAM[info_hide]">Defs_InfoDialog_Visible</include>
                <control type="group">
                    <height>view_pad</height>
                    <visible allowhiddenfocus="true">!$EXP[Exp_HideFurniture]</visible>
                    <include>Animation_FadeInOut</include>
                    <!-- Left Info -->
                    <control type="grouplist">
                        <top>0</top>
                        <include>Animation_FadeInOut</include>
                        <itemgap>0</itemgap>
                        <left>view_pad</left>
                        <align>left</align>
                        <orientation>horizontal</orientation>
                        <usecontrolcoords>true</usecontrolcoords>
                        <control type="label">
                            <aligny>center</aligny>
                            <width max="1140">auto</width>
                            <font>font_topbar</font>
                            <textcolor>main_fg_100</textcolor>
                            <label>$VAR[Label_Header_Content]</label>
                            <visible>!Control.HasFocus(300)</visible>
                        </control>
                        <control type="label">
                            <aligny>center</aligny>
                            <width max="1140">auto</width>
                            <font>font_topbar</font>
                            <textcolor>main_fg_100</textcolor>
                            <label>$INFO[Container(300).ListItem.Label]</label>
                            <visible>Control.HasFocus(300)</visible>
                        </control>
                    </control>
                    
                    <!-- Center Label -->
                    <control type="label">
                        <aligny>center</aligny>
                        <align>center</align>
                        <font>font_byline</font>
                        <textcolor>main_fg_70</textcolor>
                        <label>$VAR[Label_Header_Center]</label>
                        <include>Animation_FadeInOut</include>
                        <visible>!Control.HasFocus(300)</visible>
                    </control>

                    <!-- Right Info -->
                    <include>Topbar_Right</include>
                </control>

                <!-- Global Search -->
                <control type="group">
                    <visible allowhiddenfocus="true">!$EXP[Exp_HideFurniture]</visible>
                    <include>Animation_FadeInOut</include>
                    <include condition="Window.IsVisible(script-globalsearch.xml)">Topbar_GlobalSearch_TextButtons</include>
                </control>
            </control>
        </definition>
    </include>

    <include name="Topbar_Right">
        <control type="grouplist">
            <visible>!Window.IsVisible(DialogVolumeBar.xml) | Player.Muted</visible>
            <right>view_pad</right>
            <align>right</align>
            <orientation>horizontal</orientation>
            <itemgap>0</itemgap>
            <width>700</width>
            <usecontrolcoords>true</usecontrolcoords>
            <control type="group">
                <width>64</width>
                <control type="image">
                    <centertop>50%</centertop>
                    <height>40</height>
                    <aspectratio>keep</aspectratio>
                    <texture colordiffuse="main_fg_100">$INFO[Weather.FanartCode,resource://resource.images.weathericons.white/,.png]</texture>
                </control>
                <visible>Weather.IsFetched</visible>
                <visible>!Control.HasFocus(60)</visible>
            </control>
            <control type="label">
                <width>auto</width>
                <font>font_small</font>
                <textcolor>main_fg_100</textcolor>
                <label>$INFO[Weather.Temperature]</label>
                <visible>Weather.IsFetched</visible>
                <visible>!Control.HasFocus(60)</visible>
            </control>
            <control type="label">
                <visible>!Control.HasFocus(60)</visible>
                <width>auto</width>
                <font>font_small</font>
                <textcolor>$VAR[ColorHighlight]</textcolor>
                <label>  |  </label>
                <visible>!String.IsEmpty(Weather.Temperature)</visible>
                <visible>Weather.IsFetched</visible>
            </control>
            <control type="label">
                <width>auto</width>
                <font>font_small</font>
                <textcolor>main_fg_100</textcolor>
                <label>$INFO[System.Time]</label>
                <visible>!Control.HasFocus(60)</visible>
            </control>
            <control type="label">
                <visible>Control.HasFocus(60)</visible>
                <width>auto</width>
                <font>font_small</font>
                <textcolor>main_fg_100</textcolor>
                <label>$INFO[Container.NumItems,, $LOCALIZE[31101]]</label>
            </control>
            <control type="label">
                <visible>Control.HasFocus(60)</visible>
                <width>auto</width>
                <font>font_small</font>
                <textcolor>$VAR[ColorHighlight]</textcolor>
                <label>  |  </label>
            </control>
            <control type="label">
                <visible>Control.HasFocus(60)</visible>
                <width>auto</width>
                <font>font_small</font>
                <textcolor>main_fg_100</textcolor>
                <label>$INFO[Container.CurrentPage,$LOCALIZE[31391] , $LOCALIZE[20163] ]$INFO[Container.NumPages]</label>
            </control>
            <control type="image">
                <centertop>50%</centertop>
                <aspectratio align="right">keep</aspectratio>
                <texture colordiffuse="main_fg_100">special://skin/extras/icons/mute.png</texture>
                <width>74</width>
                <height>74</height>
                <fadetime>50</fadetime>
                <visible>Player.Muted</visible>
            </control>
        </control>
    </include>

    <include name="Topbar_Home_TextButtons">
        <control type="group">
            <top>55</top>
            <animation type="Visible">
                <effect type="fade" start="0" end="100" time="200" tween="sine" easing="in" delay="200" />
                <effect type="slide" start="0,-30" end="0,0" time="250" tween="sine" easing="out" delay="200" />
            </animation>
            <animation type="Hidden">
                <effect type="fade" start="100" end="0" time="150" tween="sine" easing="out" />
                <effect type="slide" start="0,0" end="0,-30" time="200" tween="sine" easing="out" />
            </animation>
            <control type="grouplist">
                <!-- <animation effect="slide" start="0" end="-125" condition="!Container(301).OnNext" reversible="false" time="300" tween="quadratic">Conditional</animation>
                <animation effect="slide" start="0" end="125" condition="!Container(301).OnPrevious" reversible="false" time="300" tween="quadratic">Conditional</animation> -->
                <itemgap>30</itemgap>
                <height>70</height>
                <left>view_pad</left>
                <orientation>horizontal</orientation>
                <visible>Window.IsVisible(Home) + !$EXP[Exp_Info_Visible]</visible>
                <usecontrolcoords>true</usecontrolcoords>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,0)" />
                    <param name="id" value="301" />
                    <param name="pos" value="0" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,1)" />
                    <param name="id" value="301" />
                    <param name="pos" value="1" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,2)" />
                    <param name="id" value="301" />
                    <param name="pos" value="2" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,3)" />
                    <param name="id" value="301" />
                    <param name="pos" value="3" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,4)" />
                    <param name="id" value="301" />
                    <param name="pos" value="4" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,5)" />
                    <param name="id" value="301" />
                    <param name="pos" value="5" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,6)" />
                    <param name="id" value="301" />
                    <param name="pos" value="6" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,7)" />
                    <param name="id" value="301" />
                    <param name="pos" value="7" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,8)" />
                    <param name="id" value="301" />
                    <param name="pos" value="8" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,9)" />
                    <param name="id" value="301" />
                    <param name="pos" value="9" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,10)" />
                    <param name="id" value="301" />
                    <param name="pos" value="10" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,11)" />
                    <param name="id" value="301" />
                    <param name="pos" value="11" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="visible" value="Integer.IsGreater(Container(301).NumItems,12)" />
                    <param name="id" value="301" />
                    <param name="pos" value="12" />
                </include>
            </control>
        </control>
    </include>

    <include name="Topbar_GlobalSearch_Icon">
        <control type="group">
            <left>-10</left>
            <top>1</top>
            <height>view_pad</height>
            <width>view_pad</width>
            <control type="image">
                <texture colordiffuse="main_fg_100">special://skin/extras/icons/search.png</texture>
                <visible>$PARAM[visible]</visible>
            </control>
            <control type="image">
                <texture colordiffuse="$VAR[ColorHighlight]" border="8">common/underline2.png</texture>
                <visible>$PARAM[visible]</visible>
                <visible>Control.HasFocus(990)</visible>
            </control>
            <control type="image">
                <texture colordiffuse="$VAR[ColorHighlight2]" border="8" diffuse="common/gradient-diffuse-horizontal.png">common/underline2.png</texture>
                <visible>$PARAM[visible]</visible>
                <visible>Control.HasFocus(990)</visible>
            </control>
        </control>
        <control type="group">
            <width>-40</width>
        </control>
    </include>

    <include name="Topbar_GlobalSearch_TextButtons">
        <control type="group">
            <animation type="Visible">
                <effect type="fade" start="0" end="100" time="200" tween="sine" easing="in" delay="200" />
                <effect type="slide" start="0,-30" end="0,0" time="250" tween="sine" easing="out" delay="200" />
            </animation>
            <animation type="Hidden">
                <effect type="fade" start="100" end="0" time="150" tween="sine" easing="out" />
                <effect type="slide" start="0,0" end="0,-30" time="200" tween="sine" easing="out" />
            </animation>
            <control type="grouplist">
                <itemgap>30</itemgap>
                <height>view_pad</height>
                <left>view_pad</left>
                <orientation>horizontal</orientation>
                <visible>Window.IsVisible(script-globalsearch.xml) + !$EXP[Exp_Info_Visible]</visible>
                <usecontrolcoords>true</usecontrolcoords>
                <include content="Topbar_GlobalSearch_Icon">
                    <param name="visible" value="true" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="0" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="1" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="2" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="3" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="4" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="5" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="6" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="7" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="8" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="9" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="10" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="11" />
                </include>
                <include content="Topbar_HomeMenu_Item">
                    <param name="id" value="9000" />
                    <param name="pos" value="12" />
                </include>
            </control>
        </control>
    </include>

    <include name="Topbar_Menu_SettingsTrick_Button">
        <control type="button">
            <visible allowhiddenfocus="true">false</visible>
            <onfocus condition="!Window.IsActive(InterfaceSettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(InterfaceSettings))">ReplaceWindow(InterfaceSettings)</onfocus>
            <onfocus condition="!Window.IsActive(SkinSettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(SkinSettings))">ReplaceWindow(SkinSettings)</onfocus>
            <onfocus condition="!Window.IsActive(MediaSettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(MediaSettings))">ReplaceWindow(MediaSettings)</onfocus>
            <onfocus condition="!Window.IsActive(PlayerSettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(PlayerSettings))">ReplaceWindow(PlayerSettings)</onfocus>
            <onfocus condition="!Window.IsActive(SystemSettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(SystemSettings))">ReplaceWindow(SystemSettings)</onfocus>
            <onfocus condition="!Window.IsActive(servicesettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(servicesettings))">ReplaceWindow(servicesettings)</onfocus>
            <onfocus condition="!Window.IsActive(pvrsettings) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(pvrsettings))">ReplaceWindow(pvrsettings)</onfocus>
            <onfocus condition="!Window.IsActive(systeminfo) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(systeminfo))">ReplaceWindow(systeminfo)</onfocus>
            <onfocus condition="!Window.IsActive(Profiles) + String.IsEqual(Container(300).ListItem.Property(path),ReplaceWindow(Profiles))">ReplaceWindow(Profiles)</onfocus>
        </control>
    </include>

    <include name="Topbar_Menu_Layout">
        <param name="visible" default="false" />
        <definition>
            <animation effect="fade" start="0" end="100" time="350" tween="cubic" easing="inout" reversible="false">Visible</animation>
            <animation effect="fade" start="100" end="0" time="350" tween="cubic" easing="inout" reversible="false">Hidden</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,11)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,10)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,9)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,8)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,7)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,6)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,5)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,4)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,3)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,2)">Conditional</animation>
            <animation effect="slide" end="35" condition="Integer.IsLess(Container(300).NumItems,1)">Conditional</animation>
            <visible allowhiddenfocus="true">Control.HasFocus(300) | $PARAM[visible]</visible>
            <width>770</width>
            <focusposition>5</focusposition>
            <movement>5</movement>
            <centerleft>50%</centerleft>
            <orientation>horizontal</orientation>
            <top>60</top>
            <!-- Special Conditions for Scroll Around from Menu on PVR Guide -->
            <include condition="Window.IsVisible(MyPVRGuide.xml)">View_PVRGuide_Movement</include>
            <height>120</height>
            <itemlayout width="70" height="60">
                <control type="image">
                    <centerleft>50%</centerleft>
                    <width>60</width>
                    <aspectratio>keep</aspectratio>
                    <texture colordiffuse="main_fg_30">$INFO[ListItem.Icon]</texture>
                </control>
            </itemlayout>
            <focusedlayout width="70" height="60">
                <include condition="Window.IsVisible(SettingsCategory.xml) | Window.IsVisible(SettingsProfile.xml) | Window.IsVisible(SettingsSystemInfo.xml) | Window.IsVisible(SkinSettings.xml)">Topbar_Menu_SettingsTrick_Button</include>
       
                <control type="group">
                    <centerleft>50%</centerleft>
                    <width>60</width>
                    <control type="image">
                        <texture colordiffuse="main_fg_100">common/white.png</texture>
                        <bottom>0</bottom>
                        <height>6</height>
                    </control>
                    <control type="image">
                        <aspectratio>keep</aspectratio>
                        <texture colordiffuse="main_fg_100">$INFO[ListItem.Icon]</texture>
                    </control>
                </control>
            </focusedlayout>
        </definition>
    </include>

</includes>
